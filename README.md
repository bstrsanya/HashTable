# HashTable

## Описание
Задача работы оптимизировать хеш-таблицу с завышенным **load-factor**. Будем использовать метод цепочек для решения коллизий. Для данной реализации лучшую производительность дает load-factor в диапазоне $[1,3]$. Мы будем использовать хеш-таблицу с load-factor равным $15$. Use-case для оптимизации будет являться одна загрузка данных в таблицу и большое количество поиска слов. В хеш-таблице помимо самих слов будет лежать и количество их повторений, т.е. получится частотный словарь. В качестве данных для хеширования будем использовать произведение "Война и мир". В качестве данных для запросов будем использовать системный файл *linux.words*.

### Характеристики хешируемого текста
| | |
|:-:|:-:|
| Общее количество слов | 562 185 |
| Уникальных слов | 22 259 |

Исходя из этих данных выберем размер таблицы простым числом **1483**, для того чтобы **load-factor** был равен **15**. 

## Исследование хеш-функций
Оцениваем функции по визуально по графикам, а также посчитаем дисперсию высот столбиков по формуле $\mathbb{D}\xi = \mathbb{E}(\xi ^ 2) - (\mathbb{E}\xi)^2$.

### Длина строки.
<img src="img/lenstr.png" width="75%" align="center">

### Сумма букв строки.
<img src="img/sumlet.png" width="75%" align="center">

### Murmur хеш.
<img src="img/murmur.png" width="75%" align="center">

### Полиномиальный хеш.
<img src="img/polinomial.png" width="75%" align="center">

### crc32.
<img src="img/crc32.png" width="75%" align="center">

| | Хеш функция | $\mathbb{D}\xi$ |
|:--------:|:-----------:|:------:|
| 1 | Длина строки | 32925.14 |
| 2 | Сумма букв | 252.06 |
| 3 | Murmur хеш | 16.03 |
| 4 | Полиномиальный | 15.63 |
| 5 | crc32 | 14.13 |

Остановимся на хеш функции с наилучшими результатами - **crc32**.

## Результаты
| | $-O0$ | $-O3$ |
|:-:|:-:|:-:|
|1| 17006718515 | 9803784728 |
|2|16283023670|9885127907|
|3|16827703962|9828617793|
|4|17263016207|9807204029|
|5|16996689119|9803135725|
|6|16407424345|9830709529|
|7|16977873345|9823765164|
|8|16928678841|9956006379|
|9|16875471021|9905929580|
|10|16896366935|9945201664|
|11|16948697480|9966372163|
|12|16862963674|10018951198|
|13|17619355537|10020176642|
|14|16969661596|10048933949|
|15|16925959317|10089697760|
|16|17399540855|10108028697|
|17|16916232605|10104120082|
|18|16471390749|10154676073|
|19|16918230182|10231640557|
|20|16947062219|10256965147|
|Итог|$t = (16,9 ± 0,7) * 10^9$|$t = (9,9 ± 0,3) * 10^9$|

<details>
  <summary>Посмотреть расчеты</summary>

#### $-O0$
$$
\langle t \rangle = \frac{1}{n}\sum_{i=1}^n t_i = 16922103009
$$

$$
\sigma_t = \sqrt{\frac{1}{n}\sum_{i=1}^n (t_i - \langle t \rangle)^2} = 302756304
$$

$$
\sigma_{cp} = \frac{\sigma_t}{\sqrt{n}} = 67698368
$$

$$
t = \langle t \rangle ± 11 * \sigma_{cp}, \epsilon_t = 4,4 \%
$$

$$
t = (16,9 ± 0,7) * 10^9
$$

#### $-O3$
$$
\langle t \rangle = \frac{1}{n}\sum_{i=1}^n t_i = 9979452238
$$

$$
\sigma_t = \sqrt{\frac{1}{n}\sum_{i=1}^n (t_i - \langle t \rangle)^2} = 145188922
$$

$$
\sigma_{cp} = \frac{\sigma_t}{\sqrt{n}} = 32465230
$$

$$
t = \langle t \rangle ± 9 * \sigma_{cp}, \epsilon_t = 2,9 \%
$$

$$
t = (9,9 ± 0,3) * 10^9
$$

</details>
